<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>실시간 접수 상황 확인 페이지</title>

  {% include 'center/layout/head.html' %}
  {% include 'center/layout/base.html' %}


  <style>
    /* content*/
    .content {
      width: 83%;
      height: 80%;
      float: left;
      color: black;
      padding-top: 17px;
      padding-right: 30px;
      font-size: 18px;
      font-family: 'Noto Sans KR', sans-serif;
    }

    .table {
      border: 1.6px solid black;
      text-align: center;
    }

    /* footer */
    .basefooter {
      width: 100%;
      height: 5%;
    }
  </style>


  <script>
    $(function () {
      function getOrderdataList() {
        $.ajax({
          url: "http://localhost:8000/customer/orderdata/",
          method: "GET",
        }).done(function (response) {
          console.log(response);
          const tr_array = response.map((orderdata, index) => $(
            `<tr>
                        <td>${index + 1}</td>
                        <td>${orderdata.customer_id}</td>
                        <td>${orderdata.start_address}</td>
                        <td>${orderdata.end_address}</td>
                        <td>${orderdata.operation_day}</td>
                        <td>${orderdata.order_type}</td>
                        <td>${orderdata.is_hide}</td>
                        <td>${orderdata.order_type}</td>
                        <td>${orderdata.is_hide}</td>
                    </tr>`
          ))
          $("#data_table > tbody").append(tr_array);
        });
      }

      getOrderdataList();
    });
  </script>

  <!-- <script>
    $(function () {
      function getOrderdataList() {
        var url1 = "http://localhost:8000/customer/orderdata/";
        var url2 = "http://localhost:8000/customer/signup/";

        var request1 = $.ajax({
          url: url1,
          method: "GET",
        });

        var request2 = $.ajax({
          url: url2,
          method: "GET",
        });

        $.when(request1, request2).done(function (response1, response2) {
          var data1 = response1[0];
          var data2 = response2[0];

          // data1과 data2를 조합하여 테이블 행 생성
          var tr_array = [];

          data1.forEach(function (orderdata1) {
            var matchingData = data2.find(function (orderdata2) {
              return orderdata2.username === orderdata1.customer_id;
            });

            if (matchingData) {
              var tr = $(
                `<tr>
              <td>${orderdata1.customer_id}</td>
              <td>${orderdata1.start_address}</td>
              <td>${orderdata1.end_address}</td>
              <td>${matchingData.additional_field}</td>
              <td>${matchingData.another_field}</td>
            </tr>`
              );
              tr_array.push(tr);
            }
          });

          // 생성된 행을 테이블에 추가
          $("#data_table > tbody").append(tr_array);
        });
      }

      getOrderdataList();
    });

  </script> -->


  
    
</head>


<body>
  <div class="content">
    <table class="table table-hover" id="data_table">
      <thead class="table-warning">
        <tr>
          <th scope="col"></th>
          <th scope="col">ID</th>
          <th scope="col">전화번호</th>
          <th scope="col">기어</th>
          <th scope="col">출발지</th>
          <th scope="col">목적지</th>
          <th scope="col">등록일</th>
          <th scope="col">접수상황</th>
          <th scope="col">최종확인</th>
        </tr>
      </thead>
      <tbody class="table-group-divider"></tbody>
    </table>

  </div>


  <footer class="basefooter"></footer>
</body>

</html>

<!-- 접수상황 버튼 누르면 
  1. __완료가 text로 되게 (색깔 유의)
  2. 최종확인 버튼 활성화면서 깜박깜박거리게 -->